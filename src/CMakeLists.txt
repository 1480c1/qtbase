if(APPLE)
    find_library(FWAppKit AppKit)
    find_library(FWApplicationServices ApplicationServices)
    find_library(FWCarbon Carbon)
    find_library(FWCoreFoundation CoreFoundation)
    find_library(FWCoreServices CoreServices)
    find_library(FWCoreVideo CoreVideo)
    find_library(FWcups cups)
    find_library(FWDiskArbitration DiskArbitration)
    find_library(FWFoundation Foundation)
    find_library(FWIOKit IOKit)
    find_library(FWIOSurface IOSurface)
    find_library(FWImageIO ImageIO)
    find_library(FWMetal Metal)
    find_library(FWMobileCoreServices MobileCoreServices)
    find_library(FWQuartzCore QuartzCore)
    find_library(FWSecurity Security)
    find_library(FWSystemConfiguration SystemConfiguration)
    find_library(FWUIKit UIKit)
    find_library(FWWatchKit WatchKit)
endif()

add_subdirectory(3rdparty)

function(find_or_build_bootstrap_names)
    # Move these into their own folder and move this code in the CMakeLists.txt file there!
    set01(_build_tools "x${HOST_QT_TOOLS_DIRECTORY}" STREQUAL "x")

    if (_build_tools)
        add_subdirectory(tools/bootstrap)  # bootstrap library
    endif()
    add_subdirectory(tools/moc)
    add_subdirectory(tools/rcc)
    add_subdirectory(tools/qfloat16-tables)
    add_subdirectory(tools/tracegen)

    if (_build_tools)
        install(EXPORT "Qt${PROJECT_VERSION_MAJOR}ToolsTargets" NAMESPACE "${QT_CMAKE_EXPORT_NAMESPACE}::" DESTINATION "${INSTALL_LIBDIR}/cmake/Qt${PROJECT_VERSION_MAJOR}")
    endif()
endfunction()

find_or_build_bootstrap_names()

add_subdirectory(corelib)
if (QT_FEATURE_concurrent)
    add_subdirectory(concurrent)
endif()
if (QT_FEATURE_sql)
    add_subdirectory(sql)
endif()
if (QT_FEATURE_network)
    add_subdirectory(network)
endif()
if (QT_FEATURE_xml)
    add_subdirectory(xml)
endif()
if (QT_FEATURE_dbus)
    add_subdirectory(dbus)
endif()
add_subdirectory(tools)
if(QT_FEATURE_gui)
    add_subdirectory(gui)

    if(QT_FEATURE_widgets)
        add_subdirectory(widgets)
        if(QT_FEATURE_opengl)
            add_subdirectory(opengl)
        endif()
    endif()
    add_subdirectory(platformsupport)
    add_subdirectory(platformheaders)
endif()
if (QT_FEATURE_testlib)
    add_subdirectory(testlib)
endif()
if(QT_FEATURE_gui AND QT_FEATURE_widgets)
   add_subdirectory(printsupport)
endif()
add_subdirectory(plugins)
